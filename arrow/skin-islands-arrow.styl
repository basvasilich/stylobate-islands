$skin-islands-arrow-height ?= 4.2*rem
$skin-islands-arrow-color  ?= #FFDB4C
$skin-islands-arrow-bordered-bg ?= #FFF

skin-islands-arrow()
  $height = alike(arguments, $skin-islands-arrow-height)
  $color = alike(arguments, $skin-islands-arrow-color)
  $color2 = alike(arguments, $skin-islands-arrow-bordered-bg, 1)

  if tail in arguments
    skin-islands-arrow-helper(arguments)
  else
    if search in arguments
      padding: ($islands_xs - 0.1*rem) ($islands_m - 0.2*rem) ($islands_xs - 0.1*rem) ($islands_xs - 0.1*rem)
    else
      padding: ($islands_xs + 0.2*rem) ($islands_m - 0.1*rem)
      font-size: 1.8*rem
      line-height: $height - (2*$islands_xs + 0.4*rem)

    if bordered in arguments
      background: $color2
      box-shadow: inset 0 0 0 2px $color
    else
      background: $color

    white-space: nowrap

    margin-right: round(($height / 2) * (sin(PI * 30 / 180) / cos(PI * 30 / 180)), 3)

    unless no-elements in arguments
      &:before
        content: ""
        skin-islands-arrow-helper(arguments)

skin-islands-arrow-helper()
  $height = alike(arguments, $skin-islands-arrow-height)
  $color = alike(arguments, $skin-islands-arrow-color)
  $color2 = alike(arguments, $skin-islands-arrow-bordered-bg, 1)

  position: absolute
  top: 50%
  left: 100%
  $sqrt2 = 1.414213562
  width: $height * (1/$sqrt2)
  height: $height * (1/$sqrt2)

  // tfZ should be there only if alpha == 1
  transform: translate(-50%,-50%) scale(0.5,1) rotate(-135deg)
  -webkit-transform: @transform translateZ(0) if alpha($color) == 1

  if bordered in arguments
    background: linear-gradient(45deg, $color2 50%, transparent 50%),
                linear-gradient(45deg, $color 50%, transparent 50%)
    background-repeat: no-repeat
    background-position: 3px -3px
  else
    background: linear-gradient(45deg, $color 50%,transparent 50%)
